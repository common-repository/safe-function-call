=== Safe Function Call ===
Contributors: coffee2code
Donate link: https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=6ARCFJ9TX3522
Tags: function, template, plugin, error, coffee2code
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html
Requires at least: 1.5
Tested up to: 6.6
Stable tag: 1.3.3

Safely and easily call functions that may not be available (such as those provided by a plugin that gets deactivated)


== Description ==

Safely call a function, class method, or object method in a manner that doesn't generate errors if those plugins cease to exist.

Various helper functions are provided that provide handy variations of this theme:

* `_sfc()`: Safely call a function and get its return value
* `_sfce()`: Safely call a function and echo its return value
* `_sfcf()`: Safely call a function; if it doesn't exist, then a fallback function (if specified) is called
* `_sfcm()`: Safely call a function; if it doesn't exist, then echo a message (if provided)

Let's assume you had something like this in a template:

`<?php list_cities( 'Texas', 3 ); ?>`

If you deactivated the plugin that provided `list_cities()`, your site would generate an error when that template is accessed.

You can instead use `_sfc()`, which is provided by this plugin to call other functions, like so:

`<?php _sfc( 'list_cities', 'Texas', 3 ); ?>`

That will simply do nothing if the `list_cities()` function is not available.

If you'd rather display a message when the function does not exist, use `_sfcm()` instead, like so:

`<?php _sfcm( 'list_cities', 'The cities listing is temporarily disabled.', 'Texas', 3 ); ?>`

In this case, if `list_cities()` is not available, the text "The cities listing is temporarily disabled." will be displayed.

If you'd rather call another function when the function does not exist, use _sfcf() instead, like so:

`<?php
	function unavailable_function_handler( $function_name ) { echo "The function $function_name is not available."; }
	_sfcf( 'nonexistent_function', 'unavailable_function_handler' );
?>`

In the event you want to safely call a function and echo its value, you can use `_sfce()` like so:

`<?php _sfce( 'largest_city', 'Tx' ); ?>`

Which is roughly equivalent to doing :

`<?php if function_exists( 'largest_city' ) { echo largest_city( 'Tx' ); } ?>`

= Filter invocation method =

To further prevent issues in your code should this plugin itself become deactivated, you can use indirect filter invocation to call the plugin functions. Each function has an associated filter with the same name as the function. Simply use `apply_filters()` to invoke that function instead of calling the function directly.

E.g. instead of:

`<?php _sfce( 'some_plugin_function_that_echoes', 'argument' ); ?>`

Do:

`<?php apply_filters( '_sfce', 'some_plugin_function_that_echoes', 'argument' ); ?>`

If you're relying on the return value of a function and this plugin gets deactivated, note that the `apply_filters()` call will return the name of the function you intended to call, so you should check the return value to ensure the function got called.

Instead of:

`<?php $x = _sfc( 'some_plugin_function', 'argument' ); ?>`

Do:

`<?php
	$x = apply_filters( '_sfcq', 'some_plugin_function', 'argument' );
	if ( $x !== 'some_plugin_function' ) {
		// Work with the value of $x here.
	} else {
		// The Safe Function Call plugin isn't active.
		$x = 0; // Maybe set the variable to something that makes sense in this scenario.
	}
?>`

Links: [Plugin Homepage](https://coffee2code.com/wp-plugins/safe-function-call/) | [Plugin Directory Page](https://wordpress.org/plugins/safe-function-call/) | [GitHub](https://github.com/coffee2code/safe-function-call/) | [Author Homepage](https://coffee2code.com)


== Installation ==

1. Install via the built-in WordPress plugin installer. Or download and unzip `safe-function-call.zip` inside the plugins directory for your site (typically `wp-content/plugins/`)
1. Activate the plugin through the 'Plugins' admin menu in WordPress
1. Use any of the four functions provided by this plugin as desired


== Frequently Asked Questions ==

= Do the functions provided by this plugin capture any error messages generated by the specified function? =

No.

= Why would I use any of these functions instead of using `function_exists()`/`method_exists()` directly? =

The functions provided by this plugin provide a more concise syntax for checking for function existence (but they do use `function_exists()`/`method_exists()` under the hood). `_sfce()` will both echo and return the echoed value, which may be of use in certain circumstances.  And also, since the callback to be safely called is passed as an argument, it can be easily and more concisely parameterized.

= Won't the problems this plugin addresses become a problem when using this plugin if it itself gets deactivated? =

Yes, if you make direct use of one of this plugin's functions and then deactivate the plugin, you will likely encounter an error.

However, if you make use indirect filter invocation, you can prevent errors. See the "Filter invocation method" section of the extended plugin description for example code.

= Does this plugin include unit tests? =

Yes. The tests are not packaged in the release .zip file or included in plugins.svn.wordpress.org, but can be found in the [plugin's GitHub repository](https://github.com/coffee2code/safe-function-call/).


== Developer Documentation ==

Developer documentation can be found in [DEVELOPER-DOCS.md](https://github.com/coffee2code/safe-function-call/blob/master/DEVELOPER-DOCS.md). That documentation covers the template tags and hooks provided by the plugin.

As an overview, these are the template tags provided by the plugin:

* `_sfc()`  : Safely call a function and get its return value.
* `_sfce()` : Safely call a function and echo its return value.
* `_sfcf()` : Safely call a function; if it doesn't exist, then a fallback function (if specified) is called.
* `_sfcm()` : Safely call a function; if it doesn't exist, then echo a message (if provided).

Theses are the hooks provided by the plugin. They are intended for filter invocation usage rather than typical content filtering.

* `_sfc`  : Filter to safely invoke `_sfc()` in such a way that if the plugin were deactivated or deleted, then your calls to the function won't cause errors in your site.
* `_sfce` : Filter to safely invoke `_sfce()` in such a way that if the plugin were deactivated or deleted, then your calls to the function won't cause errors in your site.
* `_sfcf` : Filter to safely invoke `_sfcf()` in such a way that if the plugin were deactivated or deleted, then your calls to the function won't cause errors in your site.
* `_sfcm` : Filter to safely invoke `_sfcm()` in such a way that if the plugin were deactivated or deleted, then your calls to the function won't cause errors in your site.


== Changelog ==

= 1.3.3 (2024-08-09) =
* Change: Note compatibility through WP 6.6+
* Change: Update copyright date (2024)
* New: Add `.gitignore` file
* Change: Remove development and testing-related files from release packaging
* Unit tests:
    * Hardening: Prevent direct web access to `bootstrap.php`
    * Allow tests to run against current versions of WordPress
    * New: Add `composer.json` for PHPUnit Polyfill dependency
    * Change: In bootstrap, store path to plugin directory in a constant

= 1.3.2 (2023-05-19) =
* New: Add DEVELOPER-DOCS.md and move hooks documentation into it
* New: Add TODO.md with potential TODO items
* Change: Improve some inline documentation formatting
* Change: Note compatibility through WP 6.3+
* Change: Update copyright date (2023)

= 1.3.1 (2021-09-26) =
* Change: Note compatibility through WP 5.8+
* Unit tests:
    * Change: Restructure unit test directories
        * Change: Move `phpunit/bin/` into `tests/`
        * Change: Move `phpunit/` into `tests/`
    * Change: Remove 'test-' prefix from unit test file
    * Change: In bootstrap, store path to plugin file constant
    * Change: In bootstrap, add backcompat for PHPUnit pre-v6.0

_Full changelog is available in [CHANGELOG.md](https://github.com/coffee2code/safe-function-call/blob/master/CHANGELOG.md)._


== Upgrade Notice ==

= 1.3.3 =
Trivial update: noted compatibility through WP 6.6+, removed unit tests from release packaging, and updated copyright date (2024)

= 1.3.2 =
Trivial update: added DEVELOPER-DOCS.md, added TODO.md, improved some inline documentation, noted compatibility through WP 6.3+, and updated copyright date (2023)

= 1.3.1 =
Trivial update: noted compatibility through WP 5.8+ and minor reorganization and tweaks to unit tests

= 1.3 =
Minor update: added support for a safer method of invoking the plugin's own functions in a way that safeguards your usage against errors if the plugin gets deactivated, noted compatibility through WP 5.7+., and updated copyright date (2021).

= 1.2.11 =
Trivial update: Restructured unit test file structure and noted compatibility through WP 5.5+.

= 1.2.10 =
Trivial update: Updated a few URLs to be HTTPS and noted compatibility through WP 5.4+.

= 1.2.9 =
Trivial update: noted compatibility through WP 5.3+ and updated copyright date (2020)

= 1.2.8 =
Trivial update: modernized unit tests, noted compatibility through WP 5.2+

= 1.2.7 =
Trivial update: created CHANGELOG.md to store historical changelog outside of readme.txt, noted compatibility through WP 5.1+, and updated copyright date (2019)

= 1.2.6 =
Trivial update: made script usable outside of PHP, added README.md and GitHub link, noted compatibility through WP 4.9+, and updated copyright date

= 1.2.5 =
Trivial update: tweaked readme, changed unit test bootstrap, noted compatibility through WP 4.7+, and updated copyright date

= 1.2.4 =
Trivial update: noted compatibility through WP 4.4+ and updated copyright date

= 1.2.3 =
Trivial update: noted compatibility through WP 4.3+

= 1.2.2 =
Trivial update: noted compatibility through WP 4.1+ and updated copyright date

= 1.2.1 =
Trivial update: noted compatibility through WP 4.0+; added plugin icon.

= 1.2 =
Recommended update: added support for full callback usage; improved documentation; added unit tests; noted compatibility through WP 3.8+

= 1.1.7 =
Trivial update: noted compatibility through WP 3.5+

= 1.1.6 =
Trivial update: noted compatibility through WP 3.4+; explicitly stated license

= 1.1.5 =
Trivial update: noted compatibility through WP 3.3+  and minor code documentation formatting changes (spacing)

= 1.1.4 =
Trivial update: noted compatibility through WP 3.2+ and minor code formatting changes (spacing)

= 1.1.3 =
Trivial update: documentation tweaks

= 1.1.2 =
Trivial update: noted compatibility through WP 3.1+ and updated copyright date

= 1.1.1 =
Minor update. Wrapped functions in if(function_exists()) checked; noted compatibility with WP 3.0+.
